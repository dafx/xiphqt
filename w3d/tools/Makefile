CC = gcc
RM = rm -rf

CFLAGS = -g -O0 -Wall -I.. -DTYPE=uint16_t
LFLAGS = -g

TARGETS = ppmdiff yuv2ppm

OBJS = $(TARGETS:=.o) ../pnm.o
SRCS = $(OBJS:.o=.c)


all: $(OBJS) $(TARGETS)

ppmdiff: ppmdiff.o ../pnm.o
	$(CC) $(LFLAGS) ppmdiff.o ../pnm.o -o $@

yuv2ppm: yuv2ppm.o ../pnm.o
	$(CC) $(LFLAGS) yuv2ppm.o ../pnm.o -o $@

.c.o: .depend
	$(CC) $(CFLAGS) -c $< -o $@

clean:
	$(RM) $(OBJS) $(TARGETS) gmon.out core .depend .depend.bak


.depend: $(SRCS)
	$(RM) .depend
	touch .depend
	sh ../tools/makedepend.sh -f.depend -- $(CFLAGS) -- $(SRCS)

-include .depend
